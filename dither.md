# DITHER
# Description
This project is made using the GODOT game engine, written in C++ and bound to the engine through GDExtension, with GDScript used for UI and lighter elements. It's a merge of Rimworld, Oxygen Not Included, and Dwarf Fortress, with an emphasis on defense, combat, exploration, and logistics. Manage resources, water, air quality, and support the lifeforms living deep underground, fighting for survival in a barren world once called Earth. Explore outside to find resources, but be careful; it is unknown what horrors linger in the toxic sand.

## update (14/06/2024)
![2024-06-14-13-32-09](https://github.com/otykh/otykh.github.io/assets/102185236/1d61fdb4-461d-49bd-9ac8-7f5312a502cf)
It was a long time coming, so I decided to create a page for this project to document my work. I've added many things, including characters, the world, world generation, items, and structures. I decided to make it in the style of DF, but using a tilemap, so in the future it is possible to replace the ASCII-style characters with something more fancy. The whole thing is using Godot's TileMap. I did a stress test in GDScript before switching to C++ to determine if this was even a good idea to make a game like this. I made a 200x200 tilemap where each tile was randomly changing, and it yielded **30fps** on my weak i5 processor. It might not seem that great, but keep in mind that this is 40,000 tiles changing each frame using GDScript. The only tiles that would change are those forced by entities, which means that around 40,000 entities must exist to tank the performance to 30fps. With C++, it will yield much better performance.

As it stands right now, the whole logic of the world is based around the basic type Tile, from which the whole world is built. Tiles can hold anything that exists in the world: Entities, Items, and Structures. When a Tile is rendered (which only happens when it is dirty, i.e., only renders after a change is made and not every frame), it takes the topmost Thing in the tile, giving priority to Entities, then Items, then Structures. It's quite robust, and I am very happy with it.

Entities are stored in World and are updated every tick, which is 0.04 seconds. I've done this for simplicity, but it is possible to use delta time instead of relying on ticks (they already use delta time anyway, but it's always equal to tick speed). Entities get tasks from Taskbank by asynchronously getting the closest task by calculating the path to the position.

Items are not entities. I did not want them to update every tick, but because this game is top-down, they need to be affected by gravity. For now, the way I did this is when the tile breaks, it will notify the tiles near it that the tile has changed. Those close tiles will get the item and check if it can fall; if it can, then it will get the lowest position and "teleport" the item there. That is why, if you look at the gif, the item is on the ground before the entity even starts its descent. It's not perfect, but it works and doesn't require a lot of resources. Maybe I will change it in the future by adding the equivalent of "freeze" in rigidbodies, but we'll see.

Structures are quite different from others. They are never updated and solely reside on a tile. Structures are just that, a single tile occupying the space. Only one structure can occupy the tile at a time. Multi-tile structures do exist, but there is a "core" structure and "linked" structures. That is how the generator is built by the end of the gif.

Overall, I really enjoy working on this project. It's challenging but also quite pleasing to solve the software design questions about how everything fits and is wired together. C++ is also quite enjoyable to use with GDExtension. For now, the next thing I want to work on is more complex tasks with the delivery of items, storage, construction, etc.
